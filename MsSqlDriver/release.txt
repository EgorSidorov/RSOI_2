Сведения о версии
Драйвер Microsoft JDBC Driver 6.0 для SQL Server
Февраль 2018 г.

------------
ВВЕДЕНИЕ
------------
Этот файл содержит самые последние сведения и другие важные дополнения к документации по Microsoft JDBC 
Driver 6.0 для SQL Server. Обязательно полностью прочтите этот файл, прежде чем устанавливать 
драйвер JDBC.

Нам важно получать ваши отзывы, и мы прилагаем все усилия, чтобы своевременно на них 
реагировать. Предоставить отзыв можно в блогах и сетевых форумах, посвященных драйверу JDBC. 
Подробнее см. на странице Microsoft JDBC Driver 6.0 для SQL Server: http://msdn.microsoft.com/data/jdbc.


------------
УСТАНОВКА
------------
Инструкции по установке драйвера JDBC приводятся в файле install.txt.  Этот файл включает 
сведения об установке драйвера JDBC в операционных системах Windows и Unix.


---------------------------
ПОДДЕРЖИВАЕМЫЕ ОПЕРАЦИОННЫЕ СИСТЕМЫ
---------------------------
Microsoft JDBC Driver 6.0 для SQL Server поддерживает следующие операционные системы.
  Windows Server 2008 с пакетом обновления 2 (SP2)
  Windows Server 2008 R2 с пакетом обновления 1 (SP1)
  Windows Server 2012
  Windows Server 2012 R2
  Windows Vista с пакетом обновления 2 (SP2)
  Windows 7 с пакетом обновления 1 (SP1)
  Windows 8
  Windows 8.1
  Windows 10
  Linux
  Unix

В вышеприведенном списке представлены некоторые из поддерживаемых операционных систем. Драйвер JDBC совместим 
с любой операционной системой, позволяющей использовать виртуальную машину Java (JVM). Но были проверены только 
системы Oracle Solaris (x86), SUSE Linux, Windows Vista с пакетом обновления 2 (SP2) и более поздние версии 
.


----------------
СОСТАВ РАСПРОСТРАНЯЕМОЙ ВЕРСИИ
----------------
Исполняемый ZIP- или TAR-файл Microsoft JDBC Driver 6.0 для SQL Server распаковывает следующие файлы 
по указанным путям относительно выбранного каталога установки.

<каталог_установки>\sqljdbc_<версия>\<язык>\install.txt
<каталог_установки>\sqljdbc_<версия>\<язык>\release.txt
<каталог_установки>\sqljdbc_<версия>\<язык>\license.txt
<каталог_установки>\sqljdbc_<версия>\<язык>\jre7\sqljdbc41.jar
<каталог_установки>\sqljdbc_<версия>\<язык>\jre8\sqljdbc42.jar
<каталог_установки>\sqljdbc_<версия>\<язык>\auth\x86\sqljdbc_auth.dll
<каталог_установки>\sqljdbc_<версия>\<язык>\auth\x64\sqljdbc_auth.dll
<каталог установки>\sqljdbc_<версия>\<язык>\samples\<файлы образцов...>
<каталог_установки>\sqljdbc_<версия>\<язык>\xa\xa_install.sql
<каталог_установки>\sqljdbc_<версия>\<язык>\xa\x86\sqljdbc_xa.dll
<каталог_установки>\sqljdbc_<версия>\<язык>\xa\x64\sqljdbc_xa.dll

Подробные сведения о каждом из компонентов см. в электронной документации
по Microsoft JDBC Driver для SQL Server. 
https://msdn.microsoft.com/ru-ru/library/dn197850(v=sql.10).aspx.

Документация.
-------------
Этот пакет содержит сведения о выпуске, руководство по установке и условия лицензии. 
Всю прочую документацию можно найти в Интернете.

Обратите внимание, что файлы автономной справки больше не используются. 


JAR-файлы.
---------
Для поддержки обратной совместимости и возможных сценариев обновления каждый пакет установки JDBC Driver 6.0 включает
две библиотеки классов JAR: sqljdbc41.jar и sqljdbc42.jar.  


Файлы определенных компонентов.
---------
Компоненты Azure Active Directory и встроенной проверки подлинности (в Windows) помещаются в каталог "auth".

Компоненты распределенных транзакций JDBC помещаются в каталог "xa".


Образцы:
-------
В каталог "samples" помещаются примеры приложений, демонстрирующие различные возможности драйвера JDBC.
драйвера JDBC. Дополнительные сведения о каждом примере и о том, как их запускать, см. в электронной 
документации.


-----------
СПИСОК ИЗМЕНЕНИЙ
-----------
Изменения в версии 6.0.8112.200 по сравнению с версией 6.0.8112.100.

Изменения в компиляторе для устранения уязвимостей, связанных со Spectre и Meltdown.

Изменения в версии 6.0.8112.100 по сравнению с версией 6.0.7728.100.

Устранена проблема, когда в пакете LOGIN7 отсутствовал номер версии драйверов.

Изменения в версии 6.0.7728.100 по сравнению с версией 6.0.7507.100.

Устранена проблема в sqljdbc_xa.dll, когда транзакции могли привести к утечке дескрипторов в SQL Server.

Изменения в версии 6.0 относительно версии 4.2.

Новая возможность — Always Encrypted. Разработчики приложений могут теперь использовать функцию Always Encrypted (AE), которая 
доступна в CTP-версии SQL Server 2016 (и более поздних версиях). Драйвер JDBC реализует функцию Always Encrypted 
путем прозрачного шифрования и расшифровки конфиденциальных данных, хранящихся в зашифрованных столбцах базы данных в SQL Server. Дополнительные сведения 
см. в документации MSDN по использованию функции Always Encrypted с драйвером JDBC. 

Новая возможность — международное доменное имя. Драйвер JDBC теперь поддерживает международные доменные имена (IDN) для 
имен серверов и экземпляров. Дополнительные сведения см. в документации MSDN по использованию IDN с драйвером JDBC.

Новая возможность — параметры, возвращающие табличные значения. Параметры, возвращающие табличные значения, предоставляют легкий способ упаковки строк данных из 
клиентского приложения в SQL Server, не требуя многочисленных циклов приема-передачи или специальной логики обработки данных на стороне сервера. 
Параметры, возвращающие табличные значения, можно использовать для инкапсуляции строк данных в клиентском приложении и их отправки на сервер 
единой параметризованной командой. Дополнительные сведения см. в документации MSDN по параметрам с табличным значением.

Новая возможность — Azure Active Directory (AAD). Проверка подлинности AAD — это механизм подключения к базе данных SQL Azure версии 12 с помощью 
удостоверений AAD. Проверка подлинности AAD используется для централизованного управления удостоверениями пользователей базы данных и в качестве альтернативы проверке подлинности SQL 
Server. Драйвер JDBC 6.0 позволяет указать учетные данные AAD в строке подключения JDBC 
для подключения к базе данных SQL Azure. Дополнительные сведения см. в документации MSDN по заданию свойств соединения для драйвера JDBC.

Улучшение — группы доступности AlwaysOn. Драйвер теперь поддерживает прозрачное подключение к группам 
доступности AlwaysOn. Он быстро обнаруживает текущую топологию AlwaysOn серверной инфраструктуры и прозрачно подключается к 
текущему активному серверу. Дополнительные сведения см. в документации MSDN по заданию свойств соединения для 
драйвер JDBC.

Улучшение — теперь драйвер JDBC поддерживает получение метаданных параметров с помощью подготовленных инструкций для сложных запросов, 
таких как вложенные запросы или соединения. Обратите внимание, что это улучшение доступно только при использовании SQL Server 2012 и более новых версий.


------------
ИЗВЕСТНЫЕ ПРОБЛЕМЫ
------------
Ниже представлены известные проблемы с Microsoft JDBC Driver 6.0 для SQL Server.

1) ОГРАНИЧЕНИЯ МЕТАДАННЫХ ПАРАМЕТРОВ ПРИ ИСПОЛЬЗОВАНИИ SQL SERVER 2008 ИЛИ 2008 R2

1.a) Метод PreparedStatement.getParameterMetadata() вызывает SQLException при использовании
с параметризованным запросом MERGE
1.2. Метаданные параметров для подготовленных инструкций не работают с запросами, имеющими вложенные запросы или соединения.


2) JavaKerberos и виртуальные машины IBM

Для обеспечения работы Java Kerberos при работе в среде Windows, возможно, потребуется указать имя субъекта в 
файле конфигурации. Пример: 
SQLJDBCDriver {
  com.ibm.security.auth.module.Krb5LoginModule required
  seDefaultCcache=true
  credsType=initiator
  principal=principalname@principaldomain;
};


3) РАЗРЫВ СОЕДИНЕНИЯ ПРИ ИСПОЛЬЗОВАНИИ SQL AZURE

При подключении к SQL Azure неактивные подключения могут быть завершены сетевым компонентом (например, 
брандмауэром) после периода бездействия. Чтобы сетевой компонент не удалял неактивные подключения, 
следует задать следующие параметры реестра (или их эквиваленты, если используется не Windows) в операционной 
системе, где загружен драйвер.
           
Параметр реестра                                                                   Рекомендованное значение
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\KeepAliveTime            30000
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\KeepAliveInterval         1000
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\TcpMaxDataRetransmission  10
